package grid;
import java.awt.*;
import java.awt.event.*;

import javax.swing.*;

/**
   Presents a phone GUI for the voice mail system.
*/

public class Telephone {
	private JTextArea speakerField;
	private Connection connect;
	/**
    Constructs a telephone with a speaker, keypad,
    and microphone.
	 */
	public Telephone() {
		JPanel phone = new JPanel();
		phone.setLayout(new GridBagLayout());
		
		GridBagConstraints gbc = new GridBagConstraints();
		
		JPanel speakerPanel = new JPanel();
		speakerPanel.setLayout(new GridBagLayout());
		gbc.gridx = 0;
		gbc.gridy = 0;
		gbc.gridwidth = 10;
		gbc.gridheight = 1;
		speakerPanel.add(new JLabel("Speaker"),gbc);
		speakerPanel.setLayout(new GridBagLayout());
		gbc.gridx = 0;
		gbc.gridy = 1;
		gbc.gridwidth = 10;
		gbc.gridheight = 25;
		speakerField = new JTextArea(10, 25);
		speakerPanel.add(speakerField, gbc);
		phone.add(speakerPanel,gbc);
		
		String keyLabels = "123456789*0#";
		JPanel keyPanel = new JPanel();
		keyPanel.setLayout(new GridBagLayout());
		for (int i = 0; i < keyLabels.length(); i++) {
			final String label = keyLabels.substring(i, i+1);
			JButton keyButton = new JButton(label);
			gbc.gridx = i%3*9;
			gbc.gridy = i/3*9;
			gbc.gridwidth = 3;
			gbc.gridheight = 3;
			keyPanel.add(keyButton, gbc);
			keyButton.addActionListener(new
					ActionListener()
			{
				public void actionPerformed(ActionEvent event)
				{
					connect.dial(label);
				}
			});
		}
		gbc.gridx = 0;
		gbc.gridy = 26;
		gbc.gridwidth = 10;
		gbc.gridheight = 10;
		phone.add(keyPanel, gbc);
		
		gbc.gridx = 0;
		gbc.gridy = 0;
		gbc.gridwidth = 10;
		gbc.gridheight = 1;
		phone.add(new JLabel("Microphone"),gbc);
		
		gbc.gridx = 0;
		gbc.gridy = 37;
		gbc.gridwidth = 10;
		gbc.gridheight = 10;
		phone.add(new JTextArea(10,25),gbc);
		
		JFrame frame = new JFrame();
		frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
	    frame.getContentPane().add(phone);
	    
	    
	    
	    frame.pack();
	    frame.setVisible(true);
	}
	
	public void speak(String output) {
		speakerField.setText(output);
	}
	
	public void run(Connection c) {
		connect = c;
	}
}
